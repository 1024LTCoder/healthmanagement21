<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.ItemsMapper">

    <!--  AssoItem 与 Item 1对多  -->
    <resultMap id="ItemsList" type="AssoItem" autoMapping="true">
        <!--    assoId：主键字段与pojo属性对应    -->
        <id column="item_id" property="itemId" />
        <association property="association" javaType="association" autoMapping="true">
            <id column="asso_id" property="assoId" />
        </association>

        <collection property="itemList" javaType="List" ofType="com.model.pojo.Item" autoMapping="true">
            <id column="item_id" property="itemId" />
            <association property="itemType" javaType="itemType" autoMapping="true">
                <id column="type_id" property="typeId" />
            </association>
            <association property="office" javaType="office" autoMapping="true">
                <id column="off_id" property="offId" />
            </association>
        </collection>
    </resultMap>


    <select id="findItems" resultMap="ItemsList">
        select * from asso_item ai
        left join association ass on ai.asso_id=ass.asso_id
        left join Item it on ai.item_id=it.item_id
    </select>











    <!--<insert id="addCard" parameterType="person" useGeneratedKeys="true" keyProperty="perId" keyColumn="per_id">
        INSERT INTO `health_management`.`person` (`per_name`, `per_tele`, `per_age`, `per_addr`, `per_blood`, `per_born`, `card_id`, `per_sex`) VALUES (#{perName}, #{perTele}, #{perAge}, #{perAddr}, #{perBlood}, #{perBorn}, #{cardId}, #{perSex});
    </insert>

    <delete id="delCard" parameterType="person">
        delete from `health_management`.`person` where per_id=#{perId}
    </delete>

    <select id="searchCardById" resultType="">
        select * from person LEFT JOIN cards ON person.card_id=cards.card_id where cards.card_no=#{cards.cardNo};
    </select>-->
</mapper>